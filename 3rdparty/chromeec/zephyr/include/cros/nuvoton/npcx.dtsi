/*
 * Copyright (c) 2021 The Chromium OS Authors
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/dts-v1/;

#include <cros/binman.dtsi>
#include <nuvoton/npcx.dtsi>

/ {
	chosen {
		cros-ec,adc = &adc0;
		cros-ec,bbram = &bbram;
		cros-ec,espi = &espi0;
		cros-ec,flash = &fiu0;
		cros-ec,raw-kb = &cros_kb_raw;
		cros-ec,watchdog = &twd0;
	};

	named-bbram-regions {
		compatible = "named-bbram-regions";

		scratchpad {
			offset = <0x00>;
			size = <0x04>;
		};
		saved-reset-flags {
			offset = <0x04>;
			size = <0x04>;
		};
		wake {
			offset = <0x08>;
			size = <0x04>;
		};
		pd0 {
			offset = <0x0c>;
			size = <0x01>;
		};
		pd1 {
			offset = <0x0d>;
			size = <0x01>;
		};
		try_slot {
			offset = <0x0e>;
			size = <0x01>;
		};
		pd2 {
			offset = <0x0f>;
			size = <0x01>;
		};
		ramlog {
			offset = <0x20>;
			size = <0x01>;
		};
		panic_flags {
			offset = <0x23>;
			size = <0x01>;
		};
		panic_bkup {
			offset = <0x24>;
			size = <0x1c>;
		};
		lct_time {
			offset = <0x40>;
			size = <0x04>;
		};
	};

	fiu0: cros-flash{
		compatible = "nuvoton,npcx-cros-flash";
		label = "INTERNAL_FLASH";
	};

	soc {

		cros_kb_raw: cros-kb-raw@400a3000 {
			compatible = "nuvoton,npcx-cros-kb-raw";
			reg = <0x400a3000 0x2000>;
			label = "CROS_KB_RAW_0";
			interrupts = <49 4>;
			clocks = <&pcc NPCX_CLOCK_BUS_APB1 NPCX_PWDWN_CTL1 0>;
			/*
			 * No KSO2 (It's inverted and implemented by GPIO for
			 * CONFIG_KEYBOARD_COL2_INVERTED.)
			 */
			pinctrl-0 = <&alt7_no_ksi0_sl
				     &alt7_no_ksi1_sl
				     &alt7_no_ksi2_sl
				     &alt7_no_ksi3_sl
				     &alt7_no_ksi4_sl
				     &alt7_no_ksi5_sl
				     &alt7_no_ksi6_sl
				     &alt7_no_ksi7_sl
				     &alt8_no_kso00_sl
				     &alt8_no_kso01_sl
				     &alt8_no_kso03_sl
				     &alt8_no_kso04_sl
				     &alt8_no_kso05_sl
				     &alt8_no_kso06_sl
				     &alt8_no_kso07_sl
				     &alt9_no_kso08_sl
				     &alt9_no_kso09_sl
				     &alt9_no_kso10_sl
				     &alt9_no_kso11_sl
				     &alt9_no_kso12_sl
				     &alt9_no_kso13_sl
				     &alt9_no_kso14_sl
				     &alt9_no_kso15_sl
				     &alta_no_kso16_sl
				     &alta_no_kso17_sl
				     >;
			wui_maps = <&wui_io31 &wui_io30 &wui_io27 &wui_io26
				    &wui_io25 &wui_io24 &wui_io23 &wui_io22>;
		};

		mtc: mtc@400b7000 {
			compatible = "nuvoton,npcx-cros-mtc";
			reg = <0x400b7000 0x2000>;
			mtc-alarm = <&wui_mtc>;
			label = "MTC";
		};

		shi: shi@4000f000 {
			compatible = "nuvoton,npcx-cros-shi";
			reg = <0x4000f000 0x120>;
			interrupts = <18 1>;
			clocks = <&pcc NPCX_CLOCK_BUS_APB3 NPCX_PWDWN_CTL5 1>;
			pinctrl-0 = <&altc_shi_sl>;
			shi-cs-wui =<&wui_io53>;
			label = "SHI";
		};
	};

	power-states {
		suspend_to_idle_instant: suspend_to_idle_instant {
			compatible = "zephyr,power-state";
			power-state-name = "suspend-to-idle";
			substate-id = <0>;
			min-residency-us = <500>;
		};

		suspend_to_idle_normal: suspend_to_idle_normal {
			compatible = "zephyr,power-state";
			power-state-name = "suspend-to-idle";
			substate-id = <1>;
			min-residency-us = <200100>;
		};
	};
};

&cpu0 {
	cpu-power-states = <&suspend_to_idle_instant &suspend_to_idle_normal>;
};

&bbram {
	status = "okay";
};

&mdc {
	status = "okay";
};
